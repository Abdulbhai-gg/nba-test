

<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Schedule Link Builder</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
</head>



<body>
    <div class="container py-4">
        <form>
            <div class="mb-3">
                <label for="exampleFormControlTextarea1" class="form-label">Blogger Page Link</label>
                <input type="text" class="form-control" id="website" />
            </div>
            <div class="mb-3">
                <label for="exampleFormControlTextarea1" class="form-label">Paste Article</label>
                <textarea class="form-control" id="html" rows="5"></textarea>
            </div>
        </form>

        <div id="data"></div>
    </div>




    <script>
        $(document).ready(function () {
            $("#html").on("change", function () {
                var currentVal = $(this).val();

                var html = $($.parseHTML(currentVal));

                //let link = 'http://www.allsportshd.tk/p/test-page.html?';
                let link = $('#website').val() + '?';

                console.log(link);

                let ch_name = [];
                let game_name = [];
                let competition = [];
                // each table row data 
                html.find("tr.info-open, tr.info").each(function (key, value) {


                    if ($(value).find('td.event')[0]) {
                        // game name
                        let game = encodeURIComponent($(value).find('td.event')[0].innerText.trim())
                        let comp = $(value).find('td.competition')[0].innerText.trim()
                        //game_name.push($(value).find('td.event')[0].innerText);
                        competition.push(comp);
                        game_name.push(game);

                    } else {
                        // channel name
                        let chname = $(value).find('th.channel_names > a').attr('href');
                        let newchname = '';
                        if (chname == undefined) {
                            newchname = "No Channel"
                            ch_name.push(newchname);
                        } else {
                            newchname = chname.split('/');
                            ch_name.push(newchname[newchname.length - 1]);
                    }

                    }




                    //console.log($(value).has.find('.channel_names > a').first());


                })
                let table = '<table class="table table-bordered table-striped table-hover">';
                if (ch_name.length == game_name.length) {

                    for (let i = 0; i <= game_name.length; i++) {
                        let alink = link + "ch=" + ch_name[i] + "&" + "game=" + game_name[i];
                        table += '<tr class=""><td>' + competition[i] + '</td><td><a href="' + alink + '" target="_blank">' + decodeURI(game_name[i]) + '</a></td><td><button data-text="' + alink + '" class="btn btn-secondary copyboard">Copy Link</button></td></tr>';
                        //console.log(link + "ch=" + ch_name[i] + "&" + "game=" + game_name[i].trim())
                    }

                }
                table += '</table>';
                $('#data').html(table);

                $('button.copyboard').on('click', function (e) {
                    e.preventDefault();
                    console.log("button click");
                    $(this).addClass('bg-danger');
                    var copyText = $(this).attr('data-text');

                    var textarea = document.createElement("textarea");
                    textarea.textContent = copyText;
                    textarea.style.position = "fixed"; // Prevent scrolling to bottom of page in MS Edge.
                    document.body.appendChild(textarea);
                    textarea.select();
                    document.execCommand("copy");

                    document.body.removeChild(textarea);
                })

            });


        });
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3"
        crossorigin="anonymous"></script>





    <center>
        <textarea cols="100" rows="10" readonly>


            <center>
                <table>
                    <tr>
                        <td>
                              <script type="text/javascript">
                atOptions = {
                    'key' : '81a13726f66172e854b0359bd8a944a3',
                    'format' : 'iframe',
                    'height' : 90,
                    'width' : 728,
                    'params' : {}
                };
                document.write('<scr' + 'ipt type="text/javascript" src="http' + (location.protocol === 'https:' ? 's' : '') + '://www.highperformancedisplayformat.com/81a13726f66172e854b0359bd8a944a3/invoke.js"></scr' + 'ipt>');
            </script>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <h1 id="game"></h1><br />
                            <div id="data"></div>
            
                            <script>
                            // <![CDATA[
                              let data = JSON.parse('{"' + decodeURI(location.search.substring(1).replace(/&/g, "\",\"").replace(/=/g,"\":\"")) + '"}');
            
                              document.getElementById("data").innerHTML = '<iframe src="http://cricfree.live/live/embed/'+data['ch']+'" width="100%" height="500px" allowfullscreen="true" marginheight="0" marginwidth="0" scrolling="no" frameborder="0" allowfullscreen></iframe>';
                              document.getElementById("game").innerText = data['game'];
                            // ]]>
                                </script>                   
            
                        </td>
                    </tr>
                    <tr>         
                      <script type="text/javascript">
                atOptions = {
                    'key' : '7066233077b536395962128dd4e237b6',
                    'format' : 'iframe',
                    'height' : 60,
                    'width' : 468,
                    'params' : {}
                };
                document.write('<scr' + 'ipt type="text/javascript" src="http' + (location.protocol === 'https:' ? 's' : '') + '://www.highperformancedisplayformat.com/7066233077b536395962128dd4e237b6/invoke.js"></scr' + 'ipt>');
            </script>
                    </tr>
                </table>
            </center>
            <script>
                function myFunction() {
                  var x = document.getElementById("ad");
                    x.style.display = "none";
                }
            </script>
        


        </textarea>
    
    </center>
</body>

</html>